# default-node tells the migration script which node the new base job
# uses. The migration script reads label names from the nodepool config and
# replaces node names in jobs with node variants.
default-node: rdo-centos-7
# List of job mapping data. In each entry:
# old
#    matches v2 job names. If it starts with a ^ it's a regex. if it doesn't
#    it's a direct string match
# new
#    the new job and can contain python format strings corresponding to
#    named regex matches from old. It can also be a dict that will be used
#    verbatim
# vars
#    variables to add to the new job and can contain format strings
#    corresponding to named regex matches from old
job-mapping:
  - old: noop
    new: noop

  - old: ^(centos-opstools-tox|gate-tox-ansible-lint|tox-flake8)
    new: tox-linters

  - old: gate-tox-docs
    new: tox-docs

  - old: ^(common|newton|ocata|pike|queens)-distgit-cbs-validate
    new: distgit-cbs-validate

  - old: ^(common|newton|ocata|pike|queens)-distgit-cbs-final-build
    new: distgit-cbs-final-build

  - old: DLRN-rpmbuild-fedora
    new:
        legacy-DLRN-rpmbuild-fedora:
          branches: ^(master)|(rpm-master)$
          nodeset: rdo-fedora-28
          voting: false

  - old: ^rdoinfo-upper-constraints-update-*
    new: legacy-rdoinfo-upper-constraints-update

  - old: ^rdoinfo-buildsys-tags-update-(ocata|pike|queens)-testing
    new: legacy-rdoinfo-buildsys-tags-update-testing

  - old: ^rdoinfo-buildsys-tags-update-(ocata|pike|queens)-release
    new: legacy-rdoinfo-buildsys-tags-update-release

  - old: ^centos-opstools-common-distgit-cbs-validate
    new: opstools-common-distgit-cbs-validate

  - old: ^centos-opstools-common-distgit-cbs-final-build
    new: opstools-common-distgit-cbs-final-build

  - old: ^centos-opstools-fluentd-012-distgit-cbs-validate
    new: opstools-fluentd-012-distgit-cbs-validate

  - old: ^centos-opstools-fluentd-012-distgit-cbs-final-build
    new: opstools-fluentd-012-distgit-cbs-final-build

  - old: ^centos-opstools-perfmon-common-distgit-cbs-validate
    new: opstools-perfmon-common-distgit-cbs-validate

  - old: ^centos-opstools-perfmon-common-distgit-cbs-final-build
    new: opstools-perfmon-common-distgit-cbs-final-build

  - old: ^centos-opstools-sensu-110-distgit-cbs-validate
    new: opstools-sensu-110-distgit-cbs-validate

  - old: ^centos-opstools-sensu-110-distgit-cbs-final-build
    new: opstools-sensu-110-distgit-cbs-final-build

  - old: ^centos-opstools-sensu-common-distgit-cbs-validate
    new: opstools-sensu-common-distgit-cbs-validate

  - old: ^centos-opstools-sensu-common-distgit-cbs-final-build
    new: opstools-sensu-common-distgit-cbs-final-build

template-mapping:
  - old: package-check-jobs
    new: package-check-jobs

  - old: package-distgit-check-jobs
    new: package-distgit-check-jobs

# Suffixes to strip from the final new name from the old ones
strip-suffixes:
  - nv

skip-macros:
  - rdo-log-setup
  - rdo-rsync-logs
