elements-dir: ../../openstack-infra/project-config # upstream nodepool elements
scripts-dir: ../../openstack-infra/project-config # upstream nodepool scripts

diskimages:
  - name: dib-centos-7
    elements:
      - centos-minimal
      - nodepool-minimal
      - sf-release # This installs centos-release-openstack-newton, centos-release-opstools and sf repository
      - sf-zuul-worker
      - jenkins-worker
      - rpm-factory
      - ansible
      - common-packages

  - name: centos-7
    elements:
      - centos-minimal
      - vm
      - simple-init
      - openstack-repos
      - nodepool-base
      - cache-devstack
      - growroot
      - infra-package-needs
      - epel
    env-vars:
      TMPDIR: /opt/dib_tmp
      DIB_CHECKSUM: '1'
      DIB_IMAGE_CACHE: /opt/dib_cache
      QEMU_IMG_OPTIONS: compat=0.10
      DIB_GRUB_TIMEOUT: '0'
      DIB_EPEL_DISABLED: '1'

labels:
  - name: centos-7
    image: centos-7
    ready-script: configure_mirror.sh
    min-ready: 3
    providers:
      - name: rdo-cloud-beta

  - name: dib-centos-7
    min-ready: 1
    image: dib-centos-7
    providers:
      - name: rcip-dev

  - name: bare-centos-7
    min-ready: 4
    image: bare-centos-7
    providers:
      - name: rdo-cloud-beta
      - name: rdo-cloud

  - name: bare-centos-7-2-node
    min-ready: 0
    image: bare-centos-7
    providers:
      - name: rcip-dev
    ready-script: multinode_setup.sh
    subnodes: 1

  - name: rdo-weirdo-centos-7
    image: rdo-weirdo-centos-7
    min-ready: 3
    providers:
      - name: rcip-dev

  - name: rdo-centos7-liberty
    image: rdo-centos7-liberty
    min-ready: 0
    providers:
      - name: rcip-dev
      - name: trystack

providers:
  - name: rcip-dev
    boot-timeout: 120
    clean-floating-ips: true
    cloud: rcip-dev
    max-servers: 18
    pool: public
    rate: 2.0
    images:
    - name: dib-centos-7
      diskimage: dib-centos-7
      username: jenkins
      min-ram: 2048

    - name: bare-centos-7
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-base.sh
      name-filter: m1.rdo-ci
      username: centos
      min-ram: 8192

    - name: rdo-weirdo-centos-7
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-weirdo.sh
      name-filter: m1.rdo-ci
      username: centos
      min-ram: 8192

    - name: rdo-centos7-liberty
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-centos7-liberty.sh
      name-filter: m1.rdo-ci
      username: centos
      min-ram: 8192

  - name: trystack
    boot-timeout: 120
    clean-floating-ips: true
    cloud: trystack
    max-servers: 9
    pool: public
    rate: 2.0
    images:
    - name: bare-centos-7
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-base.sh
      name-filter: m1.rdo-ci
      username: centos
      min-ram: 8192

    - name: rdo-centos7-liberty
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-centos7-liberty.sh
      name-filter: m1.rdo-ci
      username: centos
      min-ram: 8192

  - name: rdo-cloud-beta
    boot-timeout: 120
    clean-floating-ips: true
    cloud: rdo-cloud-beta
    max-servers: 15
    pool: public
    rate: 1.0
    networks:
    - name: private
    images:
    - name: bare-centos-7
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-base.sh
      name-filter: rdo.m1.medium
      username: centos
      min-ram: 4096

  - name: rdo-cloud
    boot-timeout: 120
    clean-floating-ips: true
    cloud: rdo-cloud
    max-servers: 30
    pool: public
    rate: 1.0
    networks:
    - name: private
    images:
    - name: bare-centos-7
      base-image: CentOS 7 (1701) x86_64
      setup: rdo-base.sh
      name-filter: rdo.m1.medium
      username: centos
      min-ram: 4096
