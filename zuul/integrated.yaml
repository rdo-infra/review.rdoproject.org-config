jobs:
  - name: ^gate-weirdo-dlrn-master-.*$
    voting: false
    branch: ^rpm-master$
    swift:
      - name: artifacts

project-templates:
  # Packstack testing matrix:
  # https://github.com/openstack/packstack#packstack-integration-tests
  - name: weirdo-dlrn-master-integration-packstack
    check:
      - DLRN-rpmbuild:
        - 'gate-weirdo-dlrn-master-packstack-{scenario}'
    gate:
      - DLRN-rpmbuild

  # Puppet testing matrix:
  # https://github.com/openstack/puppet-openstack-integration#description
  - name: weirdo-dlrn-master-integration-puppet
    check:
      - DLRN-rpmbuild:
        - 'gate-weirdo-dlrn-master-puppet-{scenario}'
    gate:
      - DLRN-rpmbuild

projects:
  - name: openstack/cinder-distgit
    template:
      # cinder iscsi/lvm backend
      - name: weirdo-dlrn-master-integration-packstack
        scenario: scenario001
      # cinder rbd backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario001

  - name: openstack/cinderclient-distgit
    template:
      # cinder iscsi/lvm backend
      - name: weirdo-dlrn-master-integration-packstack
        scenario: scenario001
      # cinder rbd backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario001

  - name: openstack/glance-distgit
    template:
      # glance file backend
      - name: weirdo-dlrn-master-integration-packstack
        scenario: scenario001
      # glance rbd backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario001
      # glance swift backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario002

  - name: openstack/glanceclient-distgit
    template:
      # glance file backend
      - name: weirdo-dlrn-master-integration-packstack
        scenario: scenario001
      # glance rbd backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario001
      # glance swift backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario002

  - name: puppet/puppet-cinder-distgit
    template:
      # cinder iscsi/lvm backend
      - name: weirdo-dlrn-master-integration-packstack
        scenario: scenario001
      # cinder rbd backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario001

  - name: puppet/puppet-glance-distgit
    template:
      # glance file backend
      - name: weirdo-dlrn-master-integration-packstack
        scenario: scenario001
      # glance rbd backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario001
      # glance swift backend
      - name: weirdo-dlrn-master-integration-puppet
        scenario: scenario002