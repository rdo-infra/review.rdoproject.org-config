---
# Hash promotion base job
- job:
    name: openstack-ci-base-promote-hash
    abstract: true
    timeout: 3000
    nodeset: cloud-centos-9-stream-vexxhost
    run: playbooks/openstack-ci-base-promote-hash/run.yaml
    post-run: playbooks/openstack-ci-base-promote-hash/post.yaml
    required-projects:
      - config
      - rdo-infra/ci-config
    roles:
      - zuul: rdo-infra/ci-config
    secrets:
      - dlrnapi

### Pipelines ###
## Container Build lines qualified via operator workflows

# Master line
- pipeline:
    name: openstack-periodic-container-master-centos9
    post-review: true
    description: Jobs in this queue are triggered to run periodically once a day.
    manager: independent
    precedence: normal
    trigger:
      timer:
        - time: '0 5 * * *'
    success:
      mqtt:
        topic: "zuul/{pipeline}/result/{project}/{branch}/{change}"
    failure:
      mqtt:
        topic: "zuul/{pipeline}/result/{project}/{branch}/{change}"

# Zed line
- pipeline:
    name: openstack-periodic-container-zed-centos9
    post-review: true
    description: Jobs in this queue are triggered to run periodically once a day.
    manager: independent
    precedence: normal
    trigger:
      timer:
        - time: '0 6 * * *'
    success:
      mqtt:
        topic: "zuul/{pipeline}/result/{project}/{branch}/{change}"
    failure:
      mqtt:
        topic: "zuul/{pipeline}/result/{project}/{branch}/{change}"


