# NOTE(pabelanger): This file needs to be merged into zuul.d/projects.yaml but
# needs to first be cleaned up, it is too large.

- project:
    name: opendev.org/openstack/puppet-pacemaker
    templates:
      - system-required
      - tripleo-ovb

- project:
    name: opendev.org/openstack/tripleo-ci
    templates:
      - ovb-branchless
      - ovb-experimental
      - system-required
      - tripleo-build-containers-jobs
      - tripleo-ovb
      - tripleo-buildimages-jobs
      - tripleo-upgrades-check-branchless
      - vexxhost-experimental
    openstack-check:
      jobs:
        - rdo-tox-molecule-rhel8:
            files:
              - ^requirements.txt$
              - ^roles/tripleo-repos/.*
              - ^setup.*$
              - ^test-requirements.txt$
              - ^tox.ini$
              - .*molecule.*
        - tripleo-ci-rhel-8-standalone-rdo
        - tripleo-build-containers-rhel-8-master:
            voting: false
            files:
              - ^playbooks/.*$
              - ^(playbooks|roles)/tripleo-buildcontainers/.*$
              - ^roles/build-containers/.*$
              - ^roles/prepare-node/.*$
              - ^roles/common/.*$
              - ^(playbooks|roles)/tripleo-repos/.*$
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master-vexxhost:
            voting: false
            files:
              - ^toci-quickstart/config/testenv/ovb-vexxhost.yml$
              - ^toci-quickstart/config/testenv/ovb.yml$
    openstack-experimental:
      jobs:
        - tripleo-ci-rhel-8-scenario001-standalone-rdo
        - tripleo-ci-rhel-8-scenario002-standalone-rdo
        - tripleo-ci-rhel-8-scenario003-standalone-rdo
    openstack-regular:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset053:
            vars:
              force_non_periodic: true
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-queens-branch:
            vars:
              force_non_periodic: true
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-rocky-branch:
            vars:
              force_non_periodic: true
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-stein-branch:
            vars:
              force_non_periodic: true
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001:
            vars:
              force_non_periodic: true
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035:
            vars:
              force_non_periodic: true
    openstack-periodic-master:
      jobs:
        # just vexxhost job running, no promotion related, remove after moving to vexxhost
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master-vexxhost:
            vars:
              force_non_periodic: true
        ##### master #####
        # new buildimage jobs https://tree.taiga.io/project/tripleo-ci-board/task/1151
        - periodic-tripleo-rhel-8-buildimage-overcloud-full-master:
            dependencies:
              - periodic-tripleo-centos-7-master-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-rhel-8-buildimage-ironic-python-agent-master:
            dependencies:
              - periodic-tripleo-centos-7-master-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-master-upload:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset010-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-singlenode-featureset027-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset030-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset037-updates-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-singlenode-featureset050-upgrades-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-standalone-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-standalone-full-tempest-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario001-standalone-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario002-standalone-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario003-standalone-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario004-standalone-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-ci-centos-7-standalone-upgrade-master:
            dependencies:
              - periodic-tripleo-centos-7-master-containers-build-push
        - periodic-tripleo-centos-7-master-containers-build-push:
            dependencies:
              - periodic-tripleo-centos-7-master-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-rhel-8-master-containers-build-push:
            dependencies:
              - periodic-tripleo-centos-7-master-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-ci-rhel-8-standalone-master:
            dependencies:
              - periodic-tripleo-rhel-8-master-containers-build-push
        - periodic-tripleo-ci-rhel-8-scenario001-standalone-master:
            dependencies:
              - periodic-tripleo-rhel-8-master-containers-build-push
        - periodic-tripleo-ci-rhel-8-scenario002-standalone-master:
            dependencies:
              - periodic-tripleo-rhel-8-master-containers-build-push
        - periodic-tripleo-ci-rhel-8-scenario003-standalone-master:
            dependencies:
              - periodic-tripleo-rhel-8-master-containers-build-push
        - periodic-tripleo-rhel-8-buildimage-ironic-python-agent-master:
            dependencies:
              - periodic-tripleo-rhel-8-buildimage-overcloud-full-master
        - periodic-tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001-master:
            dependencies:
              - periodic-tripleo-rhel-8-buildimage-ironic-python-agent-master
              - periodic-tripleo-rhel-8-master-containers-build-push
        - periodic-tripleo-centos-7-master-promote-consistent-to-tripleo-ci-testing
    openstack-periodic-latest-released:
      jobs:
        ##### stable/stein #####
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-stein-upload:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset010-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-singlenode-featureset027-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset030-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset037-updates-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-singlenode-featureset050-upgrades-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-standalone-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario001-standalone-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario002-standalone-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario003-standalone-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-scenario004-standalone-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-ci-centos-7-standalone-upgrade-stein:
            dependencies:
              - periodic-tripleo-centos-7-stein-containers-build-push
        - periodic-tripleo-centos-7-stein-containers-build-push:
            dependencies:
              - periodic-tripleo-centos-7-stein-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-centos-7-stein-promote-consistent-to-tripleo-ci-testing
    openstack-periodic-24hr:
      jobs:
        ##### stable/rocky #####
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-rocky-upload:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset010-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset016-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset017-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset018-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset019-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-singlenode-featureset027-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset030-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset037-updates-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-ci-centos-7-singlenode-featureset050-upgrades-rocky:
            dependencies:
              - periodic-tripleo-centos-7-rocky-containers-build-push
        - periodic-tripleo-centos-7-rocky-containers-build-push:
            dependencies:
              - periodic-tripleo-centos-7-rocky-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-centos-7-rocky-promote-consistent-to-tripleo-ci-testing
        ##### stable/queens #####
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-queens-upload:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset010-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset016-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset017-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset018-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset019-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset030-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-ci-centos-7-multinode-1ctlr-featureset037-updates-queens:
            dependencies:
              - periodic-tripleo-centos-7-queens-containers-build
        - periodic-tripleo-centos-7-queens-containers-build:
            dependencies:
              - periodic-tripleo-centos-7-queens-promote-consistent-to-tripleo-ci-testing
        - periodic-tripleo-centos-7-queens-promote-consistent-to-tripleo-ci-testing

- project:
    name: opendev.org/x/browbeat
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset053

- project:
    name: opendev.org/openstack/tripleo-common
    templates:
      - system-required
      - tripleo-ovb
      - ovb-experimental
      - vexxhost-experimental
      - tripleo-buildimages-jobs
    openstack-check:
      jobs:
        - tripleo-build-containers-rhel-8-master:
            files:
              - ^container-images/.*$
              - ^contrib/.*$
    openstack-experimental:
      jobs:
        - tripleo-ci-rhel-8-scenario001-standalone-rdo
        - tripleo-ci-rhel-8-scenario002-standalone-rdo
        - tripleo-ci-rhel-8-scenario003-standalone-rdo

- project:
    name: opendev.org/openstack/tripleo-heat-templates
    templates:
      - system-required
      - tripleo-ovb
      - ovb-experimental
      - vexxhost-experimental
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset042:
            files:
              - ^extraconfig/services/ipsec.*$
              - config/general_config/featureset042.*
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-rocky-vexxhost:
            files:
              - ^run_vexxhost_job$
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master-vexxhost:
            files:
              - ^run_vexxhost_job$
        - tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039
    openstack-experimental:
      jobs:
        - tripleo-ci-rhel-8-scenario001-standalone-rdo
        - tripleo-ci-rhel-8-scenario002-standalone-rdo
        - tripleo-ci-rhel-8-scenario003-standalone-rdo

- project:
    name: opendev.org/openstack/tripleo-ansible
    templates:
      - system-required
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001:
            files:
              - ^tripleo_ansible/.*
            irrelevant-files:
            - .*.md$
            - .*.rst$
            - .*.txt$
            - .*molecule.*

- project:
    name: opendev.org/openstack/openstack-virtual-baremetal
    templates:
      - ovb-experimental
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001:
            branches: stable/1.0
        - tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039:
            branches: stable/1.0
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-ovb-master:
            branches: master
    openstack-experimental:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-ovb-master:
            branches: master


- project:
    name: opendev.org/openstack/tripleo-ipsec
    templates:
      - system-required
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset042:
            irrelevant-files:
              - ^.*\.md$
              - ^.*\.rst$
              - ^Puppetfile.*$
              - ^doc/.*$
              - ^etc/.*$
              - ^metadata.json$
              - ^releasenotes/.*$
              - ^requirements.txt$
              - ^setup.*$
              - ^spec/.*$
              - ^test-requirements.txt$
              - tox.ini

- project:
    name: opendev.org/openstack/tripleo-quickstart
    templates:
      - tripleo-upgrades-check-branchless
      - system-required
      - tripleo-ovb
      - ovb-branchless
      - ovb-experimental
      - vexxhost-experimental
    openstack-check:
      jobs:
        - tripleo-ci-reproducer-fedora-28-libvirt-standalone-dryrun:
            files:
              - ^roles/libvirt/.*$
              - ^library/.*$
        - tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039:
            files:
              - config/general_config/featureset039.*
              - ^roles/freeipa-setup/.*$
              - ^roles/tripleo-inventory/.*$
              - ^roles/libvirt/setup/supplemental/.*$
              - ^playbooks/baremetal-full-freeipa.*$
              - ^playbooks/baremetal-full-deploy.*$
        - tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021:
            files:
              - config/general_config/featureset021.*

- project:
    name: opendev.org/openstack/tripleo-quickstart-extras
    templates:
      - tripleo-upgrades-check-branchless
      - system-required
      - tripleo-ovb
      - ovb-branchless
      - ovb-experimental
      - vexxhost-experimental
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039:
            files:
              - config/general_config/featureset039.*
              - ^roles/freeipa-setup/.*$
              - ^roles/tripleo-inventory/.*$
              - ^playbooks/baremetal-full-freeipa.*$
              - ^playbooks/baremetal-full-deploy.*$
        - tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020:
            files:
              - roles/validate-tempest/vars/tempest_skip_master.yml
        - tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-queens:
            files:
              - roles/validate-tempest/vars/tempest_skip_queens.yml
        - tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-rocky:
            files:
              - roles/validate-tempest/vars/tempest_skip_rocky.yml

- project:
    name: opendev.org/openstack/ansible-role-collect-logs
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset001

- project:
    name: opendev.org/openstack/tripleo-image-elements
    templates:
        - tripleo-buildimages-jobs
    openstack-check:
      jobs:
        - tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001

- project:
    name: opendev.org/openstack/heat-agents
    templates:
        - tripleo-buildimages-jobs

- project:
    name: opendev.org/openstack/ironic-python-agent
    templates:
        - tripleo-buildimages-jobs

- project:
    name: opendev.org/openstack/python-tripleoclient
    templates:
        - tripleo-buildimages-jobs

- project:
    name: opendev.org/openstack/tripleo-puppet-elements
    templates:
        - tripleo-buildimages-jobs

- project:
    name: opendev.org/openstack/tripleo-repos
    templates:
        - tripleo-buildimages-jobs

- project:
    name: opendev.org/openstack/openstack-ansible-os_tempest
    openstack-check:
      jobs:
        - tripleo-ci-rhel-8-standalone-rdo:
            voting: false

- project:
    name: opendev.org/openstack/ansible-role-python_venv_build
    openstack-check:
      jobs:
        - tripleo-ci-rhel-8-standalone-rdo:
            voting: false

- project:
    name: opendev.org/openstack/ansible-config_template
    openstack-check:
      jobs:
        - tripleo-ci-rhel-8-standalone-rdo:
            voting: false
