[tox]
minversion = 1.6
envlist = linters
skipsdist = True

[testenv]
deps = -r{toxinidir}/test-requirements.txt

[testenv:linters]
whitelist_externals = bash openstack
passenv = *
commands =
  bash -c "set; ls -la ~/.config/openstack/clouds.yaml || true"
  openstack server list
  # Run some policy checks on zuul.d/projects.yaml
  ; {toxinidir}/tools/zuul-projects-checks.py
  ; python -m pre_commit run -a

[testenv:venv]
commands = {posargs}
