- job:
    name: 'centos-opstools-doc'
    defaults: global
    builders:
      - prepare-workspace
      - shell: |
          set +e
          mkdir $WORKSPACE/artifacts

          sudo yum -y install rubygems
          gem install asciidoctor

          pushd $ZUUL_PROJECT
          ~/bin/asciidoctor -v -b html5 *.txt -D $WORKSPACE/artifacts
          popd
    publishers:
      - zuul-swift-upload
    triggers:
      - zuul
    node: bare-centos-7

- job:
    name: 'centos-opstools-tox'
    defaults: global
    builders:
      - prepare-workspace
      - shell: |
          set +e
          mkdir $WORKSPACE/artifacts

          sudo yum -y install python-tox libffi-dev libssl-dev libyaml-dev

          pushd $ZUUL_PROJECT
          tox
          popd
    publishers:
      - zuul-swift-upload
    triggers:
      - zuul
    node: bare-centos-7

- job:
    name: 'centos-opstools-runtests'
    defaults: global
    builders:
      - prepare-workspace
      - shell: |
          set +e
          mkdir $WORKSPACE/artifacts

          pushd $ZUUL_PROJECT
          sh ./run-tests.sh
          popd
    publishers:
      - zuul-swift-upload
    triggers:
      - zuul
    node: bare-centos-7
