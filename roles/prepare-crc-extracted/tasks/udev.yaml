---
- name: "Create udev rules for network interface {{ crc_net_interface_name }}"
  become: true
  ansible.builtin.copy:
    content: |
      SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="{{ ansible_facts[crc_net_interface_name]['macaddress'] }}", NAME="{{ crc_net_interface_name }}"
    dest: /etc/udev/rules.d/91-keep-interface-name.rules

- name: Reload udev rules
  become: true
  ansible.builtin.command: |
    udevadm control --reload-rules
  changed_when: false

- name: Trigger device events from kernel
  become: true
  ansible.builtin.command: |
    udevadm trigger
  changed_when: false
