- hosts: all
  vars:
    promote_source: tripleo-ci-testing
    promote_target: "current-tripleo-{{ component }}"
  tasks:
    - name: Create hash_info file with hashes from {{ promote_source }}
      include_role:
        name: get_hash
        tasks_from: get_hash.yaml

    - name: check component promotion criteria
      include_role:
        name: promote-hash
        tasks_from: check-promotion-criteria.yaml

    - name: Promote component to {{ promote_target }}
      include_role:
        name: promote-hash
        tasks_from: promote-primary-distro.yaml
