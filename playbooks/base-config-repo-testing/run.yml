---
- hosts: controller
  tasks:
    - name: Check repo log
      ansible.builtin.shell: |
        git log
      args:
        chdir: "{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir }}"
      register: log_out_1

    - name: Debug output
      ansible.builtin.debug:
        var: log_out_1

    - name: Check repo status
      ansible.builtin.shell: |
        git status
      args:
        chdir: "{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir }}"
      register: log_out_2

    - name: Debug output 2
      ansible.builtin.debug:
        var: log_out_2

    - name: Check repo log executor
      ansible.builtin.shell: |
        git log
      args:
        chdir: "{{ zuul.executor.work_root }}/{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir }}"
      register: log_out_3

    - name: Debug output 3
      ansible.builtin.debug:
        var: log_out_3

    - name: Check repo status executor
      ansible.builtin.shell: |
        git status
      args:
        chdir: "{{ zuul.executor.work_root }}/{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir }}"
      register: log_out_4

    - name: Debug output 4
      ansible.builtin.debug:
        var: log_out_4

    - name: Debug output 5
      ansible.builtin.debug:
        var: hostvars

    - name: Debug output 6
      ansible.builtin.debug:
        var: zuul

    - name: Test include a child repo role
      include_role:
        name: cifmw_test_role
